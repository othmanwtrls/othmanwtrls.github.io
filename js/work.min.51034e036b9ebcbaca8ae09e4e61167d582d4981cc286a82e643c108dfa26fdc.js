(function(){function e(e){var t,n,s=document.querySelectorAll("[data-role]");s.forEach(function(t){var n=t.getAttribute("data-role")||"";t.style.display=!e||n===e?"":"none"}),t=document.getElementById("roleCount"),t&&(n=Array.from(s).filter(e=>e.style.display!=="none").length,t.textContent=n+" résultat"+(n>1?"s":""))}function t(e){var t=new URLSearchParams(location.search);e?t.set("role",e):t.delete("role"),history.replaceState(null,"",t.toString()?"?"+t.toString():location.pathname)}function s(n){var o=document.getElementById("roleDropdownBtn"),s=document.getElementById("roleDropdown"),a=document.getElementById("roleDropdownLabel");if(!o||!s||!a)return;function i(e){o.setAttribute("aria-expanded",e?"true":"false"),s.classList.toggle("w3-show",!!e)}return o.addEventListener("click",function(e){e.preventDefault();var t=s.classList.contains("w3-show");i(!t)}),s.querySelectorAll("[data-value]").forEach(function(s){s.addEventListener("click",function(s){s.preventDefault();var o=this.getAttribute("data-value")||"",r=this.textContent.trim()||"Tous les rôles";n&&(n.value=o),a.textContent=r,i(!1),e(o),t(o)})}),document.addEventListener("click",function(e){if(!s.classList.contains("w3-show"))return;!s.contains(e.target)&&!o.contains(e.target)&&i(!1)}),{btn:o,menu:s,label:a,openMenu:i}}function n(){var i,a,r,n=document.getElementById("roleFilter"),c=s(n),o="";try{r=new URLSearchParams(location.search),o=r.get("role")||""}catch{}n&&(o&&(n.value=o),n.addEventListener("change",function(){e(n.value),t(n.value)})),c&&(i="Tous les rôles",o&&(a=Array.from(document.querySelectorAll("#roleDropdown [data-value]")).find(e=>(e.getAttribute("data-value")||"")===o),a&&(i=a.textContent.trim())),document.getElementById("roleDropdownLabel").textContent=i),e(o)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",n):n()})()